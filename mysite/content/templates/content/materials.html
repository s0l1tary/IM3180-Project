{% extends "main/base.html" %}
{% load static %}

{% block title %}{{ topic.name }}{% endblock %}

{% block content %}
    {% if messages %}
        <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 1200;">
            {% for message in messages %}
            <div class="toast align-items-center border-0 text-white 
                        {% if message.tags == 'success' %}bg-success
                        {% elif message.tags == 'error' or message.tags == 'danger' %}bg-danger
                        {% elif message.tags == 'warning' %}bg-warning text-dark
                        {% else %}bg-info{% endif %}"
                role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="4000">
                <div class="d-flex">
                <div class="toast-body">
                    {{ message }}
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            </div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="container mt-5">
        <h1 class="mb-4">{{ topic.name }} - Course Material</h1>

        {% if topic.pdf_file %}
            <div class="ratio ratio-4x3 border rounded shadow-sm">
                <object data="{{ topic.pdf_file.url }}#view=FitH&toolbar=1" type="application/pdf" width="100%" height="800px">
                    <p>Can't see the PDF? <a href="{{ topic.pdf_file.url }}" download>Download instead</a>.</p>
                </object>
            </div>
        {% else %}
            <p>No PDF available for this topic yet.</p>
        {% endif %}

        <a href="{% url 'content' %}" class="btn btn-primary mt-3">Back to Topics</a>
    </div>

<script src="{% static 'content/js/materials.js' %}"></script>
{% endblock %}